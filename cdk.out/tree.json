{"version":"tree-0.1","tree":{"id":"App","path":"","children":{"AuthStack":{"id":"AuthStack","path":"AuthStack","children":{"UserPool":{"id":"UserPool","path":"AuthStack/UserPool","children":{"Resource":{"id":"Resource","path":"AuthStack/UserPool/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPool","aws:cdk:cloudformation:props":{"accountRecoverySetting":{"recoveryMechanisms":[{"name":"verified_phone_number","priority":1},{"name":"verified_email","priority":2}]},"adminCreateUserConfig":{"allowAdminCreateUserOnly":false},"autoVerifiedAttributes":["email"],"emailVerificationMessage":"The verification code to your new account is {####}","emailVerificationSubject":"Verify your new account","policies":{"passwordPolicy":{"minimumLength":6,"requireLowercase":false,"requireUppercase":false,"requireNumbers":true,"requireSymbols":false}},"smsVerificationMessage":"The verification code to your new account is {####}","usernameAttributes":["email"],"verificationMessageTemplate":{"defaultEmailOption":"CONFIRM_WITH_CODE","emailMessage":"The verification code to your new account is {####}","emailSubject":"Verify your new account","smsMessage":"The verification code to your new account is {####}"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPool","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPool","version":"2.190.0","metadata":[{"selfSignUpEnabled":true,"signInAliases":{"email":true},"autoVerify":{"email":true},"passwordPolicy":{"minLength":"*","requireDigits":true,"requireSymbols":false,"requireUppercase":false,"requireLowercase":false}}]}},"UserPoolClient":{"id":"UserPoolClient","path":"AuthStack/UserPoolClient","children":{"Resource":{"id":"Resource","path":"AuthStack/UserPoolClient/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::UserPoolClient","aws:cdk:cloudformation:props":{"allowedOAuthFlows":["implicit","code"],"allowedOAuthFlowsUserPoolClient":true,"allowedOAuthScopes":["profile","phone","email","openid","aws.cognito.signin.user.admin"],"callbackUrLs":["https://example.com"],"explicitAuthFlows":["ALLOW_USER_PASSWORD_AUTH","ALLOW_USER_SRP_AUTH","ALLOW_REFRESH_TOKEN_AUTH"],"supportedIdentityProviders":["COGNITO"],"userPoolId":{"Ref":"UserPool6BA7E5F2"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnUserPoolClient","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.UserPoolClient","version":"2.190.0","metadata":[{"userPool":"*","authFlows":{"userPassword":true,"userSrp":true}}]}},"CognitoAuthenticatedRole":{"id":"CognitoAuthenticatedRole","path":"AuthStack/CognitoAuthenticatedRole","children":{"ImportCognitoAuthenticatedRole":{"id":"ImportCognitoAuthenticatedRole","path":"AuthStack/CognitoAuthenticatedRole/ImportCognitoAuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AuthStack/CognitoAuthenticatedRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":"*"},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"authenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"AuthStack/CognitoAuthenticatedRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"AuthStack/CognitoAuthenticatedRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":"s3:PutObject","Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"StorageStack:ExportsOutputFnGetAttProductImagesBucket03BDA4C8Arn5AA48756"},"/*"]]}}],"Version":"2012-10-17"},"policyName":"CognitoAuthenticatedRoleDefaultPolicyA138AC36","roles":[{"Ref":"CognitoAuthenticatedRole5CA1BC89"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}},{"addToPolicy":[{}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"IdentityPool":{"id":"IdentityPool","path":"AuthStack/IdentityPool","children":{"Resource":{"id":"Resource","path":"AuthStack/IdentityPool/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPool","aws:cdk:cloudformation:props":{"allowUnauthenticatedIdentities":false,"cognitoIdentityProviders":[{"clientId":{"Ref":"UserPoolClient2F5918F7"},"providerName":{"Fn::Join":["",["cognito-idp.us-east-1.",{"Ref":"AWS::URLSuffix"},"/",{"Ref":"UserPool6BA7E5F2"}]]},"serverSideTokenCheck":true}],"identityPoolName":"AppIdentityPool"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPool","version":"2.190.0"}},"AuthenticatedRole":{"id":"AuthenticatedRole","path":"AuthStack/IdentityPool/AuthenticatedRole","children":{"ImportAuthenticatedRole":{"id":"ImportAuthenticatedRole","path":"AuthStack/IdentityPool/AuthenticatedRole/ImportAuthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AuthStack/IdentityPool/AuthenticatedRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":{"Ref":"IdentityPoolEC8A1A0D"}},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"authenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"},"description":{"Fn::Join":["",["Default Authenticated Role for Identity Pool ",{"Fn::GetAtt":["IdentityPoolEC8A1A0D","Name"]}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"description":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]}},"UnauthenticatedRole":{"id":"UnauthenticatedRole","path":"AuthStack/IdentityPool/UnauthenticatedRole","children":{"ImportUnauthenticatedRole":{"id":"ImportUnauthenticatedRole","path":"AuthStack/IdentityPool/UnauthenticatedRole/ImportUnauthenticatedRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"AuthStack/IdentityPool/UnauthenticatedRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRoleWithWebIdentity","Condition":{"StringEquals":{"cognito-identity.amazonaws.com:aud":{"Ref":"IdentityPoolEC8A1A0D"}},"ForAnyValue:StringLike":{"cognito-identity.amazonaws.com:amr":"unauthenticated"}},"Effect":"Allow","Principal":{"Federated":"cognito-identity.amazonaws.com"}}],"Version":"2012-10-17"},"description":{"Fn::Join":["",["Default Unauthenticated Role for Identity Pool ",{"Fn::GetAtt":["IdentityPoolEC8A1A0D","Name"]}]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"description":"*","assumedBy":{"principalAccount":"*","assumeRoleAction":"*"}}]}},"DefaultRoleAttachment":{"id":"DefaultRoleAttachment","path":"AuthStack/IdentityPool/DefaultRoleAttachment","children":{"Resource":{"id":"Resource","path":"AuthStack/IdentityPool/DefaultRoleAttachment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Cognito::IdentityPoolRoleAttachment","aws:cdk:cloudformation:props":{"identityPoolId":{"Ref":"IdentityPoolEC8A1A0D"},"roles":{"authenticated":{"Fn::GetAtt":["IdentityPoolAuthenticatedRole42131CF5","Arn"]},"unauthenticated":{"Fn::GetAtt":["IdentityPoolUnauthenticatedRole68AEFF8B","Arn"]}}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_cognito.CfnIdentityPoolRoleAttachment","version":"2.190.0"}}},"constructInfo":{"fqn":"@aws-cdk/aws-cognito-identitypool-alpha.IdentityPoolRoleAttachment","version":"2.103.0-alpha.0","metadata":[]}}},"constructInfo":{"fqn":"@aws-cdk/aws-cognito-identitypool-alpha.IdentityPool","version":"2.103.0-alpha.0","metadata":[]}},"CDKMetadata":{"id":"CDKMetadata","path":"AuthStack/CDKMetadata","children":{"Default":{"id":"Default","path":"AuthStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"Exports":{"id":"Exports","path":"AuthStack/Exports","children":{"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","path":"AuthStack/Exports/Output{\"Fn::GetAtt\":[\"UserPool6BA7E5F2\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Ref\":\"UserPoolClient2F5918F7\"}":{"id":"Output{\"Ref\":\"UserPoolClient2F5918F7\"}","path":"AuthStack/Exports/Output{\"Ref\":\"UserPoolClient2F5918F7\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"AuthStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"AuthStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"DatabaseStack":{"id":"DatabaseStack","path":"DatabaseStack","children":{"ProductsTable":{"id":"ProductsTable","path":"DatabaseStack/ProductsTable","children":{"Resource":{"id":"Resource","path":"DatabaseStack/ProductsTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"},{"attributeName":"ownerId","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","globalSecondaryIndexes":[{"indexName":"ownerId-index","keySchema":[{"attributeName":"ownerId","keyType":"HASH"}],"projection":{"projectionType":"ALL"}}],"keySchema":[{"attributeName":"id","keyType":"HASH"}],"tableName":"app-products"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.190.0"}},"ScalingRole":{"id":"ScalingRole","path":"DatabaseStack/ProductsTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.190.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy"},{"addGlobalSecondaryIndex":[{"indexName":"*","partitionKey":{"name":"*","type":"S"},"projectionType":"ALL"}]}]}},"OrdersTable":{"id":"OrdersTable","path":"DatabaseStack/OrdersTable","children":{"Resource":{"id":"Resource","path":"DatabaseStack/OrdersTable/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::DynamoDB::Table","aws:cdk:cloudformation:props":{"attributeDefinitions":[{"attributeName":"id","attributeType":"S"}],"billingMode":"PAY_PER_REQUEST","keySchema":[{"attributeName":"id","keyType":"HASH"}],"tableName":"app-orders"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.CfnTable","version":"2.190.0"}},"ScalingRole":{"id":"ScalingRole","path":"DatabaseStack/OrdersTable/ScalingRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_dynamodb.Table","version":"2.190.0","metadata":[{"tableName":"*","partitionKey":{"name":"*","type":"S"},"billingMode":"PAY_PER_REQUEST","removalPolicy":"destroy"}]}},"CDKMetadata":{"id":"CDKMetadata","path":"DatabaseStack/CDKMetadata","children":{"Default":{"id":"Default","path":"DatabaseStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"Exports":{"id":"Exports","path":"DatabaseStack/Exports","children":{"Output{\"Fn::GetAtt\":[\"ProductsTable241ADBFF\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ProductsTable241ADBFF\",\"Arn\"]}","path":"DatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"ProductsTable241ADBFF\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Fn::GetAtt\":[\"OrdersTable315BB997\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"OrdersTable315BB997\",\"Arn\"]}","path":"DatabaseStack/Exports/Output{\"Fn::GetAtt\":[\"OrdersTable315BB997\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Ref\":\"ProductsTable241ADBFF\"}":{"id":"Output{\"Ref\":\"ProductsTable241ADBFF\"}","path":"DatabaseStack/Exports/Output{\"Ref\":\"ProductsTable241ADBFF\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Ref\":\"OrdersTable315BB997\"}":{"id":"Output{\"Ref\":\"OrdersTable315BB997\"}","path":"DatabaseStack/Exports/Output{\"Ref\":\"OrdersTable315BB997\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"DatabaseStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"DatabaseStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"StorageStack":{"id":"StorageStack","path":"StorageStack","children":{"ProductImagesBucket":{"id":"ProductImagesBucket","path":"StorageStack/ProductImagesBucket","children":{"Resource":{"id":"Resource","path":"StorageStack/ProductImagesBucket/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::Bucket","aws:cdk:cloudformation:props":{"bucketName":"app-product-images-570013956457-us-east-1","publicAccessBlockConfiguration":{"blockPublicAcls":true,"blockPublicPolicy":false,"ignorePublicAcls":true,"restrictPublicBuckets":false},"tags":[{"key":"aws-cdk:auto-delete-objects","value":"true"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucket","version":"2.190.0"}},"Policy":{"id":"Policy","path":"StorageStack/ProductImagesBucket/Policy","children":{"Resource":{"id":"Resource","path":"StorageStack/ProductImagesBucket/Policy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::S3::BucketPolicy","aws:cdk:cloudformation:props":{"bucket":{"Ref":"ProductImagesBucket03BDA4C8"},"policyDocument":{"Statement":[{"Action":["s3:DeleteObject*","s3:GetBucket*","s3:List*","s3:PutBucketPolicy"],"Effect":"Allow","Principal":{"AWS":{"Fn::GetAtt":["CustomS3AutoDeleteObjectsCustomResourceProviderRole3B1BD092","Arn"]}},"Resource":[{"Fn::GetAtt":["ProductImagesBucket03BDA4C8","Arn"]},{"Fn::Join":["",[{"Fn::GetAtt":["ProductImagesBucket03BDA4C8","Arn"]},"/*"]]}]},{"Action":"s3:GetObject","Effect":"Allow","Principal":{"AWS":"*"},"Resource":{"Fn::Join":["",[{"Fn::GetAtt":["ProductImagesBucket03BDA4C8","Arn"]},"/uploads/*"]]}}],"Version":"2012-10-17"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.CfnBucketPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketPolicy","version":"2.190.0","metadata":[{"bucket":"*"}]}},"AutoDeleteObjectsCustomResource":{"id":"AutoDeleteObjectsCustomResource","path":"StorageStack/ProductImagesBucket/AutoDeleteObjectsCustomResource","children":{"Default":{"id":"Default","path":"StorageStack/ProductImagesBucket/AutoDeleteObjectsCustomResource/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResource","version":"2.190.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3.Bucket","version":"2.190.0","metadata":[{"bucketName":"*","blockPublicAccess":"*","publicReadAccess":false,"removalPolicy":"destroy","autoDeleteObjects":true}]}},"Custom::S3AutoDeleteObjectsCustomResourceProvider":{"id":"Custom::S3AutoDeleteObjectsCustomResourceProvider","path":"StorageStack/Custom::S3AutoDeleteObjectsCustomResourceProvider","children":{"Staging":{"id":"Staging","path":"StorageStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Staging","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"Role":{"id":"Role","path":"StorageStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Role","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}},"Handler":{"id":"Handler","path":"StorageStack/Custom::S3AutoDeleteObjectsCustomResourceProvider/Handler","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.CustomResourceProviderBase","version":"2.190.0"}},"CDKMetadata":{"id":"CDKMetadata","path":"StorageStack/CDKMetadata","children":{"Default":{"id":"Default","path":"StorageStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"Exports":{"id":"Exports","path":"StorageStack/Exports","children":{"Output{\"Fn::GetAtt\":[\"ProductImagesBucket03BDA4C8\",\"Arn\"]}":{"id":"Output{\"Fn::GetAtt\":[\"ProductImagesBucket03BDA4C8\",\"Arn\"]}","path":"StorageStack/Exports/Output{\"Fn::GetAtt\":[\"ProductImagesBucket03BDA4C8\",\"Arn\"]}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Output{\"Ref\":\"ProductImagesBucket03BDA4C8\"}":{"id":"Output{\"Ref\":\"ProductImagesBucket03BDA4C8\"}","path":"StorageStack/Exports/Output{\"Ref\":\"ProductImagesBucket03BDA4C8\"}","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"StorageStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"StorageStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"ApiStack":{"id":"ApiStack","path":"ApiStack","children":{"AppApi":{"id":"AppApi","path":"ApiStack/AppApi","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::RestApi","aws:cdk:cloudformation:props":{"binaryMediaTypes":["multipart/form-data"],"name":"App Service"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnRestApi","version":"2.190.0"}},"Deployment":{"id":"Deployment","path":"ApiStack/AppApi/Deployment","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Deployment/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Deployment","aws:cdk:cloudformation:props":{"description":"Automatically created by the RestApi construct","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnDeployment","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Deployment","version":"2.190.0","metadata":[{"description":"*","api":"*","retainDeployments":"*"},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]},{"addToLogicalId":[{}]}]}},"DeploymentStage.prod":{"id":"DeploymentStage.prod","path":"ApiStack/AppApi/DeploymentStage.prod","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/DeploymentStage.prod/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Stage","aws:cdk:cloudformation:props":{"deploymentId":{"Ref":"AppApiDeployment7658F313801e8d7e6280fb6eff9a39454b6b5f22"},"restApiId":{"Ref":"AppApiE7BADA01"},"stageName":"prod"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnStage","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Stage","version":"2.190.0","metadata":[{"deployment":"*"}]}},"Endpoint":{"id":"Endpoint","path":"ApiStack/AppApi/Endpoint","constructInfo":{"fqn":"aws-cdk-lib.CfnOutput","version":"2.190.0"}},"Default":{"id":"Default","path":"ApiStack/AppApi/Default","children":{"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Fn::GetAtt":["AppApiE7BADA01","RootResourceId"]},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"auth":{"id":"auth","path":"ApiStack/AppApi/Default/auth","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["AppApiE7BADA01","RootResourceId"]},"pathPart":"auth","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/auth/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiauth82CA383E"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"register":{"id":"register","path":"ApiStack/AppApi/Default/auth/register","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/register/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"AppApiauth82CA383E"},"pathPart":"register","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/auth/register/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/register/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiauthregister96482BDC"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"ApiStack/AppApi/Default/auth/register/POST","children":{"ApiPermission.ApiStackAppApiEFDECC67.POST..auth.register":{"id":"ApiPermission.ApiStackAppApiEFDECC67.POST..auth.register","path":"ApiStack/AppApi/Default/auth/register/POST/ApiPermission.ApiStackAppApiEFDECC67.POST..auth.register","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["register07798668","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/POST/auth/register"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.register":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.register","path":"ApiStack/AppApi/Default/auth/register/POST/ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.register","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["register07798668","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/POST/auth/register"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/register/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["register07798668","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiauthregister96482BDC"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}},"login":{"id":"login","path":"ApiStack/AppApi/Default/auth/login","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/login/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Ref":"AppApiauth82CA383E"},"pathPart":"login","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/auth/login/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/login/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiauthlogin667C6834"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"ApiStack/AppApi/Default/auth/login/POST","children":{"ApiPermission.ApiStackAppApiEFDECC67.POST..auth.login":{"id":"ApiPermission.ApiStackAppApiEFDECC67.POST..auth.login","path":"ApiStack/AppApi/Default/auth/login/POST/ApiPermission.ApiStackAppApiEFDECC67.POST..auth.login","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["login68DC89FC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/POST/auth/login"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.login":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.login","path":"ApiStack/AppApi/Default/auth/login/POST/ApiPermission.Test.ApiStackAppApiEFDECC67.POST..auth.login","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["login68DC89FC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/POST/auth/login"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/auth/login/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"NONE","httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["login68DC89FC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiauthlogin667C6834"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}},"products":{"id":"products","path":"ApiStack/AppApi/Default/products","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/products/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["AppApiE7BADA01","RootResourceId"]},"pathPart":"products","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/products/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/products/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiproducts71E811CD"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"ApiStack/AppApi/Default/products/POST","children":{"ApiPermission.ApiStackAppApiEFDECC67.POST..products":{"id":"ApiPermission.ApiStackAppApiEFDECC67.POST..products","path":"ApiStack/AppApi/Default/products/POST/ApiPermission.ApiStackAppApiEFDECC67.POST..products","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["createProduct6AB81851","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/POST/products"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..products":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..products","path":"ApiStack/AppApi/Default/products/POST/ApiPermission.Test.ApiStackAppApiEFDECC67.POST..products","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["createProduct6AB81851","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/POST/products"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/products/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"AuthorizerBD825682"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["createProduct6AB81851","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiproducts71E811CD"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":"*","authorizationType":"*"}}]}},"GET":{"id":"GET","path":"ApiStack/AppApi/Default/products/GET","children":{"ApiPermission.ApiStackAppApiEFDECC67.GET..products":{"id":"ApiPermission.ApiStackAppApiEFDECC67.GET..products","path":"ApiStack/AppApi/Default/products/GET/ApiPermission.ApiStackAppApiEFDECC67.GET..products","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["listProducts10125CE9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/GET/products"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.GET..products":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.GET..products","path":"ApiStack/AppApi/Default/products/GET/ApiPermission.Test.ApiStackAppApiEFDECC67.GET..products","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["listProducts10125CE9","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/GET/products"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/products/GET/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"AuthorizerBD825682"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["listProducts10125CE9","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiproducts71E811CD"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":"*","authorizationType":"*"}}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}},"orders":{"id":"orders","path":"ApiStack/AppApi/Default/orders","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/orders/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["AppApiE7BADA01","RootResourceId"]},"pathPart":"orders","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/orders/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/orders/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiordersDA4076BF"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"ApiStack/AppApi/Default/orders/POST","children":{"ApiPermission.ApiStackAppApiEFDECC67.POST..orders":{"id":"ApiPermission.ApiStackAppApiEFDECC67.POST..orders","path":"ApiStack/AppApi/Default/orders/POST/ApiPermission.ApiStackAppApiEFDECC67.POST..orders","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["createOrder36EBF614","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/POST/orders"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..orders":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..orders","path":"ApiStack/AppApi/Default/orders/POST/ApiPermission.Test.ApiStackAppApiEFDECC67.POST..orders","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["createOrder36EBF614","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/POST/orders"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/orders/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"AuthorizerBD825682"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["createOrder36EBF614","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiordersDA4076BF"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":"*","authorizationType":"*"}}]}},"GET":{"id":"GET","path":"ApiStack/AppApi/Default/orders/GET","children":{"ApiPermission.ApiStackAppApiEFDECC67.GET..orders":{"id":"ApiPermission.ApiStackAppApiEFDECC67.GET..orders","path":"ApiStack/AppApi/Default/orders/GET/ApiPermission.ApiStackAppApiEFDECC67.GET..orders","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["listOrders22BEEF14","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/GET/orders"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.GET..orders":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.GET..orders","path":"ApiStack/AppApi/Default/orders/GET/ApiPermission.Test.ApiStackAppApiEFDECC67.GET..orders","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["listOrders22BEEF14","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/GET/orders"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/orders/GET/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"AuthorizerBD825682"},"httpMethod":"GET","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["listOrders22BEEF14","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiordersDA4076BF"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":"*","authorizationType":"*"}}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}},"upload":{"id":"upload","path":"ApiStack/AppApi/Default/upload","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/upload/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Resource","aws:cdk:cloudformation:props":{"parentId":{"Fn::GetAtt":["AppApiE7BADA01","RootResourceId"]},"pathPart":"upload","restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnResource","version":"2.190.0"}},"OPTIONS":{"id":"OPTIONS","path":"ApiStack/AppApi/Default/upload/OPTIONS","children":{"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/upload/OPTIONS/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"apiKeyRequired":false,"authorizationType":"NONE","httpMethod":"OPTIONS","integration":{"type":"MOCK","requestTemplates":{"application/json":"{ statusCode: 200 }"},"integrationResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":"'Content-Type,X-Amz-Date,Authorization,X-Api-Key,X-Amz-Security-Token,X-Amz-User-Agent'","method.response.header.Access-Control-Allow-Origin":"'*'","method.response.header.Access-Control-Allow-Methods":"'OPTIONS,GET,PUT,POST,DELETE,PATCH,HEAD'"}}]},"methodResponses":[{"statusCode":"204","responseParameters":{"method.response.header.Access-Control-Allow-Headers":true,"method.response.header.Access-Control-Allow-Origin":true,"method.response.header.Access-Control-Allow-Methods":true}}],"resourceId":{"Ref":"AppApiupload0817C56D"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":{"authorizerId":"*","authorizationType":"*"},"apiKeyRequired":false,"authorizationType":"*","methodResponses":[{"statusCode":"*","responseParameters":"*"}]}},{"addMethodResponse":[{"statusCode":"*","responseParameters":"*"}]}]}},"POST":{"id":"POST","path":"ApiStack/AppApi/Default/upload/POST","children":{"ApiPermission.ApiStackAppApiEFDECC67.POST..upload":{"id":"ApiPermission.ApiStackAppApiEFDECC67.POST..upload","path":"ApiStack/AppApi/Default/upload/POST/ApiPermission.ApiStackAppApiEFDECC67.POST..upload","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["uploadFile9F8E5DBC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/",{"Ref":"AppApiDeploymentStageprod4B09D08C"},"/POST/upload"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..upload":{"id":"ApiPermission.Test.ApiStackAppApiEFDECC67.POST..upload","path":"ApiStack/AppApi/Default/upload/POST/ApiPermission.Test.ApiStackAppApiEFDECC67.POST..upload","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Permission","aws:cdk:cloudformation:props":{"action":"lambda:InvokeFunction","functionName":{"Fn::GetAtt":["uploadFile9F8E5DBC","Arn"]},"principal":"apigateway.amazonaws.com","sourceArn":{"Fn::Join":["",["arn:aws:execute-api:us-east-1:570013956457:",{"Ref":"AppApiE7BADA01"},"/test-invoke-stage/POST/upload"]]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnPermission","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/AppApi/Default/upload/POST/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Method","aws:cdk:cloudformation:props":{"authorizationType":"COGNITO_USER_POOLS","authorizerId":{"Ref":"AuthorizerBD825682"},"httpMethod":"POST","integration":{"type":"AWS_PROXY","uri":{"Fn::Join":["",["arn:aws:apigateway:us-east-1:lambda:path/2015-03-31/functions/",{"Fn::GetAtt":["uploadFile9F8E5DBC","Arn"]},"/invocations"]]},"integrationHttpMethod":"POST"},"resourceId":{"Ref":"AppApiupload0817C56D"},"restApiId":{"Ref":"AppApiE7BADA01"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnMethod","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Method","version":"2.190.0","metadata":[{"resource":"*","httpMethod":"*","integration":"*","options":{"authorizer":"*","authorizationType":"*"}}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.Resource","version":"2.190.0","metadata":[{"pathPart":"*"}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.ResourceBase","version":"2.190.0","metadata":["*"]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.RestApi","version":"2.190.0","metadata":[{"restApiName":"*","binaryMediaTypes":"*","defaultCorsPreflightOptions":{"allowOrigins":"*","allowMethods":"*"}}]}},"Authorizer":{"id":"Authorizer","path":"ApiStack/Authorizer","children":{"Resource":{"id":"Resource","path":"ApiStack/Authorizer/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::ApiGateway::Authorizer","aws:cdk:cloudformation:props":{"identitySource":"method.request.header.Authorization","name":"ApiStackAuthorizer3F70D2B6","providerArns":[{"Fn::ImportValue":"AuthStack:ExportsOutputFnGetAttUserPool6BA7E5F2Arn686ACC00"}],"restApiId":{"Ref":"AppApiE7BADA01"},"type":"COGNITO_USER_POOLS"}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CfnAuthorizer","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_apigateway.CognitoUserPoolsAuthorizer","version":"2.190.0","metadata":["*"]}},"register":{"id":"register","path":"ApiStack/register","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/register/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/register/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/register/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/register/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/register/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"StorageStack:ExportsOutputFnGetAttProductImagesBucket03BDA4C8Arn5AA48756"},"/*"]]}},{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttOrdersTable315BB997ArnB3A07C42"},{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},{"Fn::Join":["",[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},"/index/*"]]},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"registerServiceRoleDefaultPolicy20A8D18E","roles":[{"Ref":"registerServiceRole6553F8E3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"ApiStack/register/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/register/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/register/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/register/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"b17155ac4f6a9f9203547fdcdd54743cb3e43ecec4d27032d2539a49a3cc1719.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"},"COGNITO_CLIENT_ID":{"Fn::ImportValue":"AuthStack:ExportsOutputRefUserPoolClient2F5918F753847A55"}}},"handler":"index.handler","role":{"Fn::GetAtt":["registerServiceRole6553F8E3","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"},{}]}},"login":{"id":"login","path":"ApiStack/login","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/login/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/login/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/login/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]}]}},"Code":{"id":"Code","path":"ApiStack/login/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/login/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/login/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/login/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"fbdc1d5e20003e0839e918f844cc8f6bf713bc77a089ed8481f4fd4dc0aaec78.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"},"COGNITO_CLIENT_ID":{"Fn::ImportValue":"AuthStack:ExportsOutputRefUserPoolClient2F5918F753847A55"}}},"handler":"index.handler","role":{"Fn::GetAtt":["loginServiceRole1314ABEB","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"},{}]}},"createProduct":{"id":"createProduct","path":"ApiStack/createProduct","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/createProduct/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/createProduct/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/createProduct/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/createProduct/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/createProduct/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:BatchWriteItem","dynamodb:ConditionCheckItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:PutItem","dynamodb:Query","dynamodb:Scan","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},{"Fn::Join":["",[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},"/index/*"]]}]},{"Action":["s3:GetBucket*","s3:GetObject*","s3:List*"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"StorageStack:ExportsOutputFnGetAttProductImagesBucket03BDA4C8Arn5AA48756"},{"Fn::Join":["",[{"Fn::ImportValue":"StorageStack:ExportsOutputFnGetAttProductImagesBucket03BDA4C8Arn5AA48756"},"/*"]]}]}],"Version":"2012-10-17"},"policyName":"createProductServiceRoleDefaultPolicyA4987AF8","roles":[{"Ref":"createProductServiceRole49F078DF"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]},{"addToPrincipalPolicy":[{}]}]}},"Code":{"id":"Code","path":"ApiStack/createProduct/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/createProduct/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/createProduct/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/createProduct/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"e757910c386bc9d1b52edf268e7f33122b732b8dfba152c78c0b108a7159781f.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"}}},"handler":"index.handler","role":{"Fn::GetAtt":["createProductServiceRole49F078DF","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"}]}},"listProducts":{"id":"listProducts","path":"ApiStack/listProducts","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/listProducts/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/listProducts/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/listProducts/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/listProducts/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/listProducts/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:GetItem","dynamodb:Query"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},{"Fn::Join":["",[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttProductsTable241ADBFFArn55D06E2D"},"/index/*"]]}]}],"Version":"2012-10-17"},"policyName":"listProductsServiceRoleDefaultPolicyC06B5225","roles":[{"Ref":"listProductsServiceRole1ADC593D"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"ApiStack/listProducts/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/listProducts/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/listProducts/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/listProducts/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"f0e98d5ee0f2c040f8787165f50ce31fbd57b25d8e8504854e7892835a5dbf5c.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"}}},"handler":"index.handler","role":{"Fn::GetAtt":["listProductsServiceRole1ADC593D","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"}]}},"createOrder":{"id":"createOrder","path":"ApiStack/createOrder","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/createOrder/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/createOrder/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/createOrder/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/createOrder/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/createOrder/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchWriteItem","dynamodb:DeleteItem","dynamodb:DescribeTable","dynamodb:PutItem","dynamodb:UpdateItem"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttOrdersTable315BB997ArnB3A07C42"},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"createOrderServiceRoleDefaultPolicyB070ABE1","roles":[{"Ref":"createOrderServiceRole90210CAA"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"ApiStack/createOrder/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/createOrder/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/createOrder/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/createOrder/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"c09c4687dc88d0b088e40277cfdb0837e7fa73e373972f613930f06e900d43d0.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"}}},"handler":"index.handler","role":{"Fn::GetAtt":["createOrderServiceRole90210CAA","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"}]}},"listOrders":{"id":"listOrders","path":"ApiStack/listOrders","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/listOrders/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/listOrders/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/listOrders/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/listOrders/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/listOrders/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["dynamodb:BatchGetItem","dynamodb:ConditionCheckItem","dynamodb:DescribeTable","dynamodb:GetItem","dynamodb:GetRecords","dynamodb:GetShardIterator","dynamodb:Query","dynamodb:Scan"],"Effect":"Allow","Resource":[{"Fn::ImportValue":"DatabaseStack:ExportsOutputFnGetAttOrdersTable315BB997ArnB3A07C42"},{"Ref":"AWS::NoValue"}]}],"Version":"2012-10-17"},"policyName":"listOrdersServiceRoleDefaultPolicy2043F559","roles":[{"Ref":"listOrdersServiceRole0793152F"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"ApiStack/listOrders/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/listOrders/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/listOrders/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/listOrders/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"2f3560144935b1e377ed84af8b757dddc651c81a75aab8034beefa8aa9178dd3.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"}}},"handler":"index.handler","role":{"Fn::GetAtt":["listOrdersServiceRole0793152F","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"}]}},"uploadFile":{"id":"uploadFile","path":"ApiStack/uploadFile","children":{"ServiceRole":{"id":"ServiceRole","path":"ApiStack/uploadFile/ServiceRole","children":{"ImportServiceRole":{"id":"ImportServiceRole","path":"ApiStack/uploadFile/ServiceRole/ImportServiceRole","constructInfo":{"fqn":"aws-cdk-lib.Resource","version":"2.190.0","metadata":["*"]}},"Resource":{"id":"Resource","path":"ApiStack/uploadFile/ServiceRole/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Role","aws:cdk:cloudformation:props":{"assumeRolePolicyDocument":{"Statement":[{"Action":"sts:AssumeRole","Effect":"Allow","Principal":{"Service":"lambda.amazonaws.com"}}],"Version":"2012-10-17"},"managedPolicyArns":[{"Fn::Join":["",["arn:",{"Ref":"AWS::Partition"},":iam::aws:policy/service-role/AWSLambdaBasicExecutionRole"]]}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnRole","version":"2.190.0"}},"DefaultPolicy":{"id":"DefaultPolicy","path":"ApiStack/uploadFile/ServiceRole/DefaultPolicy","children":{"Resource":{"id":"Resource","path":"ApiStack/uploadFile/ServiceRole/DefaultPolicy/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::IAM::Policy","aws:cdk:cloudformation:props":{"policyDocument":{"Statement":[{"Action":["s3:Abort*","s3:PutObject","s3:PutObjectLegalHold","s3:PutObjectRetention","s3:PutObjectTagging","s3:PutObjectVersionTagging"],"Effect":"Allow","Resource":{"Fn::Join":["",[{"Fn::ImportValue":"StorageStack:ExportsOutputFnGetAttProductImagesBucket03BDA4C8Arn5AA48756"},"/*"]]}}],"Version":"2012-10-17"},"policyName":"uploadFileServiceRoleDefaultPolicy2CFFD736","roles":[{"Ref":"uploadFileServiceRole411BBCC3"}]}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.CfnPolicy","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Policy","version":"2.190.0","metadata":["*",{"attachToRole":["*"]},{"attachToRole":["*"]},{"addStatements":[{}]}]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_iam.Role","version":"2.190.0","metadata":[{"assumedBy":{"principalAccount":"*","assumeRoleAction":"*"},"managedPolicies":[{"managedPolicyArn":"*"}]},{"addToPrincipalPolicy":[{}]},{"attachInlinePolicy":["*"]},{"attachInlinePolicy":["*"]}]}},"Code":{"id":"Code","path":"ApiStack/uploadFile/Code","children":{"Stage":{"id":"Stage","path":"ApiStack/uploadFile/Code/Stage","constructInfo":{"fqn":"aws-cdk-lib.AssetStaging","version":"2.190.0"}},"AssetBucket":{"id":"AssetBucket","path":"ApiStack/uploadFile/Code/AssetBucket","constructInfo":{"fqn":"aws-cdk-lib.aws_s3.BucketBase","version":"2.190.0","metadata":[]}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_s3_assets.Asset","version":"2.190.0"}},"Resource":{"id":"Resource","path":"ApiStack/uploadFile/Resource","attributes":{"aws:cdk:cloudformation:type":"AWS::Lambda::Function","aws:cdk:cloudformation:props":{"code":{"s3Bucket":"cdk-hnb659fds-assets-570013956457-us-east-1","s3Key":"9082d8ff6b19b60ede504ee864d6396b34844e34b606498817af5171269a0499.zip"},"environment":{"variables":{"PRODUCTS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefProductsTable241ADBFF4DFBD40D"},"ORDERS_TABLE":{"Fn::ImportValue":"DatabaseStack:ExportsOutputRefOrdersTable315BB997F7C1D27E"},"BUCKET_NAME":{"Fn::ImportValue":"StorageStack:ExportsOutputRefProductImagesBucket03BDA4C8A4D6E2D0"}}},"handler":"index.handler","role":{"Fn::GetAtt":["uploadFileServiceRole411BBCC3","Arn"]},"runtime":"nodejs18.x","timeout":10}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda.CfnFunction","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.aws_lambda_nodejs.NodejsFunction","version":"2.190.0","metadata":[{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*","code":"*"},{},{},{},{"entry":"*","handler":"*","runtime":"*","timeout":"*","environment":"*"},{}]}},"CDKMetadata":{"id":"CDKMetadata","path":"ApiStack/CDKMetadata","children":{"Default":{"id":"Default","path":"ApiStack/CDKMetadata/Default","constructInfo":{"fqn":"aws-cdk-lib.CfnResource","version":"2.190.0"}}},"constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}},"BootstrapVersion":{"id":"BootstrapVersion","path":"ApiStack/BootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnParameter","version":"2.190.0"}},"CheckBootstrapVersion":{"id":"CheckBootstrapVersion","path":"ApiStack/CheckBootstrapVersion","constructInfo":{"fqn":"aws-cdk-lib.CfnRule","version":"2.190.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.Stack","version":"2.190.0"}},"Tree":{"id":"Tree","path":"Tree","constructInfo":{"fqn":"constructs.Construct","version":"10.3.0"}}},"constructInfo":{"fqn":"aws-cdk-lib.App","version":"2.190.0"}}}